{"data":{"markdownRemark":{"html":"<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ac1b05bf81b8e59550fc9d97d5d341b4/30631/what-should-we-test-head.jpeg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 66.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAAB7S5GjWZI/8QAGhAAAwEAAwAAAAAAAAAAAAAAAQIDABESMf/aAAgBAQABBQI56CaqeQBQ6qdpDz//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwEn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAgIDAAAAAAAAAAAAAAAAAAEQETNRof/aAAgBAQAGPwIt7LMnCm4//8QAGxAAAwEBAAMAAAAAAAAAAAAAAAERIUExUXH/2gAIAQEAAT8hTx9IPbWMI8NX2K+TNaeqzphD/9oADAMBAAIAAwAAABBz3//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQMBAT8Qi6M//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAgEBPxBvCn//xAAcEAEAAwACAwAAAAAAAAAAAAABABEhMVFxgdH/2gAIAQEAAT8QR8Yf+gBcEsAsBs03FeH7CS4sYv3LjtaAtn//2Q=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"What should we test ReactJS Components\"\n        title=\"\"\n        src=\"/static/ac1b05bf81b8e59550fc9d97d5d341b4/f8fb9/what-should-we-test-head.jpeg\"\n        srcset=\"/static/ac1b05bf81b8e59550fc9d97d5d341b4/e8976/what-should-we-test-head.jpeg 148w,\n/static/ac1b05bf81b8e59550fc9d97d5d341b4/63df2/what-should-we-test-head.jpeg 295w,\n/static/ac1b05bf81b8e59550fc9d97d5d341b4/f8fb9/what-should-we-test-head.jpeg 590w,\n/static/ac1b05bf81b8e59550fc9d97d5d341b4/85e3d/what-should-we-test-head.jpeg 885w,\n/static/ac1b05bf81b8e59550fc9d97d5d341b4/d1924/what-should-we-test-head.jpeg 1180w,\n/static/ac1b05bf81b8e59550fc9d97d5d341b4/30631/what-should-we-test-head.jpeg 1600w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h6>Photo by <a href=\"https://unsplash.com/photos/ZMraoOybTLQ?utm_source=unsplash&#x26;utm_medium=referral&#x26;utm_content=creditCopyText\">Artem Sapegin</a> on <a href=\"https://unsplash.com/search/photos/unit-testing-reactjs?utm_source=unsplash&#x26;utm_medium=referral&#x26;utm_content=creditCopyText\">Unsplash</a></h6>\n<p>There are a lot of discussions in the web when we talk about testing. And even more about unit testing. In <a href=\"https://reactjs.org/\">React</a>.</p>\n<p><strong>TL;DR</strong></p>\n<p>This is going to be a brief summary of what and how should we think about when we test a <a href=\"https://github.com/facebook/react/\">ReactJS</a> application. More specific, what should we write tests for, when creating React components for our app. If you want to skip the reading, <a href=\"http://mihailgaberov.github.io/testing-reactjs-presentation/\">here</a> you can find shorter version in a few slides.</p>\n<blockquote>\n<p><em>All of the points below are recommended by people smarter than me. I just collected them as a summary of best practices, trying to help my team to decide on the matter. And start using them in our day-to-day work.</em></p>\n</blockquote>\n<p><strong>Do we need unit tests?</strong></p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2746832c0ca105861255611879ce9a77/a2930/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 550px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.18181818181819%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAACqklEQVQozwGfAmD9AMDc0cTd08Le07rPxK23sbvEwKy0sL/KxbfHwLnDv7rBvsXHxr7AvsjIxquppomOiYuakJyypqW6roaWiQC10sW71MjD2cHI2Mq6uLrW1dXCwsLByca6zMbHzsy+vLu9u7q6ubbLy8jW2NjMztG2xL7O6NvD29C1y7wAnruupcC0sciyqb+xpbavpLavo7avorewqcG5iZOKd3JrbXBtS09LXGJhhHpzpoN6rLChvtfCqsS2jKeXAJGun5Swo5Ovo5OvopSxo5aypZSyo5SvoZy3qW56b0tCOUc8MDcyKBceG0xAOHplU36Zio2ol5OsnH+WhQB5jnl8kX5/k4GEmIaHmomFm4iHm4Z9kX1vh3R/hXdeU0lvXk5IPzRRRj8hGRI7PC85TT9KW0pballufmoAWWNLWmVQYmtVbHJZbXVbbXddcHlfbHZfY3BZbWhWgHFnloh8gGtdoIp+YVhPIjEdIzQfKzonNUU0RlNAAElWQEVSQzhFNT9OPkBSPj9TP0JWRFFkU1hnUFZaSVpNRGxZTXBbTHZiU1pbUDpLPjNENC4+LzxOQT9SRgBEU0dCUkc5ST81RDs0QjkxPTQwPDM1Qjg0RDpJVk1XS0dZSkJmUUFrW1JHVlJBUEU/T0VEVEpKW1BKW1AAe5aKd5GEa4V5a4R6c42BZn9yYXhrYnpvdYp6kJZzUUU3LiEUSDAhjH1yp5eykJannLChkqecg5+Uf5mQAHWPhXeOhYqYkYeUjXyLhIaTjYqYkZOjn7m4rLGijGxhXFtQSHpwa4+AdaqipYeQrry2qszIv6iwqHqSiACMq6CSqqKxtragq6icq6axtbOwqKSqnpmwqoSjn5OPfXaRgXm3rqqWiX+3oqHBk5+ypZ+imJC8ppe0xr5L0FBnXqE4RQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Do we need unit tests?\"\n        title=\"\"\n        src=\"/static/2746832c0ca105861255611879ce9a77/a2930/1.png\"\n        srcset=\"/static/2746832c0ca105861255611879ce9a77/96aa6/1.png 148w,\n/static/2746832c0ca105861255611879ce9a77/84631/1.png 295w,\n/static/2746832c0ca105861255611879ce9a77/a2930/1.png 550w\"\n        sizes=\"(max-width: 550px) 100vw, 550px\"\n      />\n  </span>\n  </a></p>\n<p>This is a long time discussion, that has only one right answer. Yes! Tests provide developers with confidence. This confidence allows us to produce software with better quality. To do proper refactoring. And to reason better about what we do.</p>\n<p>In short term it might look itâ€™s not worth it. That it takes too much time. Time we might spend for implementing features instead. But very soon after the start of every project, the payoff of having a nice test suit is huge. The punishment of not having such, especially when a release date is approachingâ€Šâ€”â€Šdisaster!</p>\n<p><strong>Test render logic</strong></p>\n<p>When we write tests for our components, we write them in such way that they test only the render logic and donâ€™t care about any internal implementation. What does this mean? It means that, your test should be testing the things that the user will be seeing and interacting with. Letâ€™s say you are testing a component that displays a button on the screen.</p>\n<blockquote>\n<p><em>When the user clicks the button, your component renders a message in a div element. Your test should check practically for the sameâ€Šâ€”â€Šcheck if the button is clickable and if this div exists after the clicking.</em></p>\n</blockquote>\n<p><strong>No lifecycle methods</strong></p>\n<p>Tests should not test lifecycle methods, they are supposed to be covered by React itself. If we have some logic that needs to be tested in these methods, we should try to extract it in another testable place and only use it in there. Ideally, in our <em>componentDidMount</em> method for example, we should have only functionality for fetching data (calling an API for example). All the rest that you might be tempted to leave there, should be extracted in other methods, that could be tested, if needed.</p>\n<p>No outsiders</p>\n<blockquote>\n<p><em>(Unit) Tests should not test interaction with outside world!</em></p>\n</blockquote>\n<p>The name â€œunitâ€ implies independence and autonomy. A unit test should be an encapsulated piece of code, that has inside everything it needs to perform its job. When we need to write tests which need data, we use mocks. That said, every interaction with APIs, DBs, etc., is not a matter of unit tests and should not be tested in such.</p>\n<p><strong>Small, smaller, easier</strong></p>\n<p>Tests should be small and easy to readâ€Šâ€”â€Šif we need to test a big component with a lot of dependencies, we need to consider splitting it to smaller testable pieces.</p>\n<blockquote>\n<p><em>DÄ«vide et imperÄ.</em></p>\n</blockquote>\n<p>As the famous quote above implies, itâ€™s a lot more easier to deal with small, well modularized components, than the opposite. Also, if we need to use big mocks, we need to extract them out of the test and only use them by importing, in order to avoid polluting the test file.</p>\n<hr>\n<p><strong>Example</strong></p>\n<ul>\n<li>Given a simple component containing a button and a text field</li>\n<li>We should test what the user seesâ€Šâ€”â€Šrendering, and what the user can doâ€Šâ€”â€Šuser interaction</li>\n<li>If there is visual change after clickingâ€Šâ€”â€Štest for it</li>\n<li>If there is a value returned after clickingâ€Šâ€”â€Štest for it</li>\n</ul>\n<p><em>But we donâ€™t care about the internal implementation of the click handler!</em></p>\n<p>I have prepared a small example, trying to demonstrate the above. You can find it <a href=\"https://github.com/mihailgaberov/testing-reactjs-examples\">here</a>. In order to run it locally on your machines, just clone it and install the dependencies. Then do <em>â€˜npm run testâ€™</em>. ğŸš€ ğŸ“œ</p>\n<p><strong>References</strong></p>\n<p>There are many resources on that subject online, but I am going to list here the ones I have found very useful and learned from them.</p>\n<p>ğŸ‘ A <a href=\"https://medium.freecodecamp.org/the-right-way-to-test-react-components-548a4736ab22\">nice article</a> on the subject</p>\n<p>ğŸ‘ <a href=\"https://www.leighhalliday.com/testing-react-jest-enzyme-sinon\">Another good one</a> for testing with Jest, Enzyme and Sinon</p>\n<p>ğŸ‘ <a href=\"https://github.com/sapegin/jest-cheat-sheet\">Jest Cheat sheet</a></p>\n<p>ğŸ‘ <a href=\"https://mihailgaberov.github.io/testing-reactjs-presentation\">Presentation slides</a> online</p>\n<p>ğŸ‘ <a href=\"https://github.com/mihailgaberov/testing-reactjs-examples\">Github repo</a> with working examples</p>\n<p><strong>Conclusion</strong></p>\n<p>The important lesson we must keep from all this testing stuff is, that no matter how exactly we write our tests (well it mattersâ€¦a bit ğŸ’¬), as long as we write tests at all. This way of thinking and working should become our second nature when we are striving to produce errorproof software. With time and practice the things become better and easier. The most important thing for us is to never stop improving.</p>\n<blockquote>\n<p><em>Keep going!</em></p>\n</blockquote>\n<p>ğŸ”¥ Thanks for reading! ğŸ”¥</p>","frontmatter":{"title":"What should we test (ReactJS Components)"}}},"pageContext":{"slug":"/what-should-we-test-reactjs/"}}